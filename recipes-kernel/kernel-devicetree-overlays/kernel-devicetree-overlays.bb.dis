HOMEPAGE = "https://github.com/beagleboard/devicetree-source"
LICENSE = "GPL"
LIC_FILES_CHKSUM = "file://LICENSE;md5=94d55d512a9ba36caa9b7df079bae19f"

SRC_URI = "https://github.com/beagleboard/devicetree-source.git"
SRC_URI[md5sum] = "b1dd9c9c2def103321a27f18a7213844"
SRC_URI[sha256sum] = "84a3fdadc0a913a6b997736d4f85770e7337fe7a733100ecf92b7fc6d3a8861d"

S = "${WORKDIR}/arch/arm/boot/dts"

do_compile(){
    for file in *.dts:
    do 
        basefile=`basename ${file} .dts`
        dtc -I dts -O dtb -o ${basefile}.dtbo -b 0 -@ ${basefile}.dts
    done            
}


do_install(){
    install -d ${D}/lib
    install -d ${D}/lib/firmware/
    install -m 0644 ${S}/*.dts ${D}/lib/firmware/
    install -m 0644 ${S}/*.dtbo ${D}/lib/firmware/
}

FILES_${PN} = "\
/lib/firmware/*.dtbo \
/lib/firmware/*.dts \
"

